<!--
  Generated template for the DetailsPage page.

  See http://ionicframework.com/docs/components/#navigation for more info on
  Ionic pages and navigation.
-->
<ion-header>
  <ion-navbar>
    <ion-title>Details</ion-title>
  </ion-navbar>
</ion-header>

<ion-content>
  <ion-list>
    <ion-item-divider color="light">
      <strong>Customer</strong>
        <button *ngIf="isActive()" ion-button icon-left round color="danger" item-end (click)="cancel()">
          <ion-icon name="close-circle"></ion-icon> Cancel</button>
        <button *ngIf="isActive()" ion-button icon-left round color="secondary" item-end (click)="markComplete()">
          <ion-icon name="checkmark-circle"></ion-icon> Mark as complete</button>
      <div *ngIf="isPending()" item-end>
        <h4 ion-text>Pending Verification</h4>
      </div>
    </ion-item-divider>
    <ion-item>
      <ion-avatar item-start>
        <img [src]="getImage(job.url_image)||'assets/imgs/user.png'">
      </ion-avatar>

      <h2>{{job.c_name}}</h2>
      <div>
        <button ion-button icon-left round outline color="danger" item-start (click)="call()">
          <ion-icon name="phone-portrait"></ion-icon>Call</button>
        <button ion-button icon-left round outline color="danger" item-start (click)="wa()">
          <ion-icon name="chatbubbles"></ion-icon>Chat</button>
      </div>
    </ion-item>
    <ion-item-divider color="light">
      <strong>Products</strong>
    </ion-item-divider>
    <ion-item no-padding *ngFor="let order of job.orders">
      <ion-thumbnail item-start>
        <img [src]="getProductImage(order.ImageURL)||'assets/imgs/user.png'">
      </ion-thumbnail>
      <h2>{{order.Name}} x {{order.ProductQuantity}}</h2>
      <h4>RM{{order.price}}</h4>
    </ion-item>
    <ion-item no-lines>
      <ion-note item-end>
        <strong>Total: RM{{job.total_price}}</strong>
      </ion-note>
    </ion-item>
  </ion-list> 
  <ion-item-divider color="light">
    <strong>Special Note</strong>
  </ion-item-divider>
   <ion-item item-content>
      {{job.note || 'Not available'}}
   </ion-item>
  <ion-item-divider color="light">
    <strong>Location</strong>
  </ion-item-divider>
  <div id="map" #map></div>
 
  <ion-fab right bottom>
      <button ion-fab color="danger" (click)="scrollTop()"><ion-icon name="arrow-dropup"></ion-icon></button>
  </ion-fab>

</ion-content>